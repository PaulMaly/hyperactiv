{"version":3,"file":"index.js","sources":["../src/react/index.js"],"sourcesContent":["import { PureComponent } from 'react'\nimport hyperactiv from 'hyperactiv'\n\nconst { observe, computed, dispose } = hyperactiv\n\nexport class Watch extends PureComponent {\n    constructor(props) {\n        super(props)\n        this._callback = () => {\n            this.__mounted &&\n            this.forceUpdate.bind(this)()\n        }\n        this.state = {\n            render: this.computeRenderMethod(props.render)\n        }\n    }\n    componentWillUnmount() {\n        this.__mounted = false\n        if(this.state.render) {\n            dispose(this.state.render)\n            dispose(this._callback)\n        }\n    }\n    componentDidMount() {\n        this.__mounted = true\n    }\n    computeRenderMethod(newRender) {\n        if(this._currentRender !== newRender) {\n            if(!newRender)\n                return null\n            this._currentRender = computed(newRender, {\n                autoRun: false,\n                callback: this._callback\n            })\n        }\n        return this._currentRender\n    }\n    render() {\n        const { render } = this.props\n        this.computeRenderMethod(render)\n        return this._currentRender && this._currentRender() || null\n    }\n}\n\nexport const store = function(obj, options = {}) {\n    return observe(obj, Object.assign({ deep: true, batch: true }, options))\n}"],"names":["observe","computed","dispose","hyperactiv","PureComponent","[object Object]","props","super","this","_callback","__mounted","forceUpdate","bind","state","render","computeRenderMethod","newRender","_currentRender","autoRun","callback","obj","options","Object","assign","deep","batch"],"mappings":"wUAGA,MAAMA,QAAEA,EAAOC,SAAEA,EAAQC,QAAEA,GAAYC,wBAEZC,gBACvBC,YAAYC,GACRC,MAAMD,GACNE,KAAKC,UAAY,MACbD,KAAKE,WACLF,KAAKG,YAAYC,KAAKJ,KAAtBA,KAEJA,KAAKK,OACDC,OAAQN,KAAKO,oBAAoBT,EAAMQ,SAG/CT,uBACIG,KAAKE,WAAY,EACdF,KAAKK,MAAMC,SACVZ,EAAQM,KAAKK,MAAMC,QACnBZ,EAAQM,KAAKC,YAGrBJ,oBACIG,KAAKE,WAAY,EAErBL,oBAAoBW,GAChB,GAAGR,KAAKS,iBAAmBD,EAAW,CAClC,IAAIA,EACA,OAAO,KACXR,KAAKS,eAAiBhB,EAASe,GAC3BE,SAAS,EACTC,SAAUX,KAAKC,YAGvB,OAAOD,KAAKS,eAEhBZ,SACI,MAAMS,OAAEA,GAAWN,KAAKF,MAExB,OADAE,KAAKO,oBAAoBD,GAClBN,KAAKS,gBAAkBT,KAAKS,kBAAoB,eAI1C,SAASG,EAAKC,MAC/B,OAAOrB,EAAQoB,EAAKE,OAAOC,QAASC,MAAM,EAAMC,OAAO,GAAQJ"}