{"version":3,"file":"index.js","sources":["../src/handlers/all.js","../src/handlers/write.js","../src/handlers/index.js","../src/handlers/debug.js"],"sourcesContent":["export const allHandler = function(handlers) {\n    return Array.isArray(handlers) ?\n        (keys, value, proxy) => handlers.forEach(fn => fn(keys, value, proxy)) :\n        handlers\n}","const isObj = function(o) { return o && typeof o === 'object' }\nconst getWriteContext = function(prop) {\n    return Number.isInteger(Number.parseInt(prop, 10)) ? [] : {}\n}\nexport const writeHandler = function(target) {\n    if(!target) throw new Error('writeHandler needs a proper target !')\n    return function(props, value) {\n        value = isObj(value) ? JSON.parse(JSON.stringify(value)) : value\n        for(let i = 0; i < props.length - 1; i++) {\n            var prop = props[i]\n            const nextProp = props[i + 1]\n            if(typeof target[prop] === 'undefined')\n                target[prop] = getWriteContext(nextProp)\n            target = target[prop]\n        }\n        target[props[props.length - 1]] = value\n    }\n}","import { allHandler } from './all'\nimport { debugHandler } from './debug'\nimport { writeHandler } from './write'\n\nexport default {\n    write: writeHandler,\n    debug: debugHandler,\n    all: allHandler\n}","export const debugHandler = function(logger) {\n    logger = logger || console\n    return function(props, value) {\n        const keys = props.map(prop => Number.isInteger(Number.parseInt(prop)) ? `[${prop}]` : `.${prop}`).join('').substr(1)\n        logger.log(`${keys} = ${JSON.stringify(value, null, '\\t')}`)\n    }\n}"],"names":["getWriteContext","prop","Number","isInteger","parseInt","write","target","Error","props","value","o","JSON","parse","stringify","i","length","nextProp","debug","logger","console","keys","map","join","substr","log","all","handlers","Array","isArray","proxy","forEach","fn"],"mappings":"kMAAO,MCCDA,EAAkB,SAASC,GAC7B,OAAOC,OAAOC,UAAUD,OAAOE,SAASH,EAAM,mBCG9CI,MDDwB,SAASC,GACjC,IAAIA,EAAQ,MAAM,IAAIC,MAAM,wCAC5B,OAAO,SAASC,EAAOC,GANb,IAASC,EAOfD,GAPeC,EAODD,IAP+B,iBAANC,EAOhBC,KAAKC,MAAMD,KAAKE,UAAUJ,IAAUA,EAC3D,IAAI,IAAIK,EAAI,EAAGA,EAAIN,EAAMO,OAAS,EAAGD,IAAK,CACtC,IAAIb,EAAOO,EAAMM,GACjB,MAAME,EAAWR,EAAMM,EAAI,QACA,IAAjBR,EAAOL,KACbK,EAAOL,GAAQD,EAAgBgB,IACnCV,EAASA,EAAOL,GAEpBK,EAAOE,EAAMA,EAAMO,OAAS,IAAMN,ICTtCQ,MCNwB,SAASC,GAEjC,OADAA,EAASA,GAAUC,QACZ,SAASX,EAAOC,GACnB,MAAMW,EAAOZ,EAAMa,IAAIpB,GAAQC,OAAOC,UAAUD,OAAOE,SAASH,QAAaA,SAAcA,KAAQqB,KAAK,IAAIC,OAAO,GACnHL,EAAOM,OAAOJ,OAAUT,KAAKE,UAAUJ,EAAO,KAAM,WDGxDgB,IFPsB,SAASC,GAC/B,OAAOC,MAAMC,QAAQF,GACjB,CAACN,EAAMX,EAAOoB,IAAUH,EAASI,QAAQC,GAAMA,EAAGX,EAAMX,EAAOoB,IAC/DH"}